<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    
    <title>NASM Overview | 小白维基</title>
    
    
        <meta name="keywords" content="汇编语言">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="前言机器指令是用二进制代码表示的 CPU 能够直接识别和执行的一种指令，不同的 CPU 架构有不同的机器指令集。汇编指令是将机器指令对应到便于记忆和书写的字符串（注意并非一一对应，同一汇编器可能存在多个汇编指令对应一个机器指令的情况），汇编指令编写完成后通过汇编器将其翻译成机器指令供 CPU 执行。 不同汇编器针对同一机器指令可以有不同的汇编指令表达方式，只要汇编器最终能够正确无误地翻译就可以。">
<meta property="og:type" content="article">
<meta property="og:title" content="NASM Overview">
<meta property="og:url" content="https://wiki.blanc.site/archives/90a7f914.html">
<meta property="og:site_name" content="小白维基">
<meta property="og:description" content="前言机器指令是用二进制代码表示的 CPU 能够直接识别和执行的一种指令，不同的 CPU 架构有不同的机器指令集。汇编指令是将机器指令对应到便于记忆和书写的字符串（注意并非一一对应，同一汇编器可能存在多个汇编指令对应一个机器指令的情况），汇编指令编写完成后通过汇编器将其翻译成机器指令供 CPU 执行。 不同汇编器针对同一机器指令可以有不同的汇编指令表达方式，只要汇编器最终能够正确无误地翻译就可以。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.blanc.site//wiki/img/20210812231023.png">
<meta property="article:published_time" content="2021-02-05T00:00:00.000Z">
<meta property="article:modified_time" content="2024-11-10T15:39:52.940Z">
<meta property="article:author" content="ryomahan">
<meta property="article:tag" content="汇编语言">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.blanc.site//wiki/img/20210812231023.png">
    

    
        <link rel="alternate" href="/atom.xml" title="小白维基" type="application/atom+xml">
    
    
        <link rel="icon" href="/favicon.ico">
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">

    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
<script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110100486-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110100486-1');
</script>
    
    
        <meta name="google-site-verification" content="D9ld5oQABBxIwNpgD_WN61p51-ZcABZ6Olt4HKcxlWw">
    
    
        <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?fac7e69191f0847b886888aa7c794fa7";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    


    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- 字体引入 -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&display=swap" rel="stylesheet">
<meta name="generator" content="Hexo 4.2.1"></head>
</html>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">小白维基</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://www.gravatar.com/avatar/e30ee2d02a4632e35575fec3944497df">
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://www.gravatar.com/avatar/e30ee2d02a4632e35575fec3944497df?s=128">
            <h2 id="name">Ryoma</h2>
            <h3 id="title">毕己一生，依依东望。</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Jinan, China</span>
            <a id="follow" target="_blank" href="https://github.com/ryomahan/" rel="external nofollow noopener noreferrer">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                25
                <span>文章</span>
            </div>
            <div class="article-info-block">
                12
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://blog.blanc.site" target="_blank" title="wordpress" class="tooltip">
                            <i class="fa fa-wordpress"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://twitter.com/ryomahan1996" target="_blank" title="twitter" class="tooltip" rel="external nofollow noopener noreferrer">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://weibo.com/xiaobaidh" target="_blank" title="weibo" class="tooltip" rel="external nofollow noopener noreferrer">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://github.com/ryomahan" target="_blank" title="github" class="tooltip" rel="external nofollow noopener noreferrer">
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class="tooltip">
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>

    
        <div class="widget-wrap widget-list">
            <h3 class="widget-title"><span>友情链接</span></h3>
            <div class="widget">
                <ul>
                    
                        <li>
                            <a href="https://pythonhunter.org/" target="_blank" rel="external nofollow noopener noreferrer">捕蛇者说</a>
                        </li>
                    
                        <li>
                            <a href="https://laike9m.com/" target="_blank" rel="external nofollow noopener noreferrer">laike9m</a>
                        </li>
                    
                        <li>
                            <a href="https://www.kawabangga.com/" target="_blank" rel="external nofollow noopener noreferrer">卡瓦邦噶</a>
                        </li>
                    
                        <li>
                            <a href="https://manjusaka.itscoder.com/" target="_blank" rel="external nofollow noopener noreferrer">Manjusaka</a>
                        </li>
                    
                        <li>
                            <a href="https://blog.evo.moe/" target="_blank" rel="external nofollow noopener noreferrer">Sparta_EN</a>
                        </li>
                    
                        <li>
                            <a href="https://blog.blanc.site" target="_blank">一只小白</a>
                        </li>
                    
                </ul>
            </div>
        </div>
    
</aside>

            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id="categories">
        <h3 class="widget-title">
            <span>分类</span>
            &nbsp;
            <a id="allExpand" href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            1-网络笔记
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/e5187cf6.html">同步到腾讯云社区</a></li>  <li class="file"><a href="/archives/4940711f.html">8086 处理器寻址方式</a></li>  <li class="file"><a href="/archives/5c113e93.html">SSH overview</a></li>  <li class="file"><a href="/archives/c57afff6.html">记一次失败的 AI 辅助编程全历程</a></li>  <li class="file"><a href="/archives/d644d904.html">「翻译」如何组织大型 Python 项目</a></li>  <li class="file"><a href="/archives/ed42c0e4.html">「翻译」使用 Llama-index 实现的 Agentic RAG-Router Query Engine</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            2-软件使用
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Chrome
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/decc86d5.html">「转载」解析谷歌 Chrome 各分支版本</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Django
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/b641d3ac.html">Django 笔记-2-源码理解-urls 篇</a></li>  <li class="file"><a href="/archives/ab18c3c3.html">Django 笔记-3-文档阅读-关于 Django 文档</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Vue
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/793400e.html">解决 Vue CSS 样式重复载入，为 Vue 添加全局 less 或 sass 基础样式库</a></li>  <li class="file"><a href="/archives/341c107a.html">Vue Router 实现动态路由和常见问题解决方案</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            3-计算机科学
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            1-理论计算机科学
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            1-数据结构和算法
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/f3c5e08e.html">数据结构笔记1-概论</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            4-编程语言和编译器
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Python
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/7a294715.html">所谓 WSGI</a></li>  <li class="file"><a href="/archives/ffe3a081.html">Python MRO</a></li>  <li class="file"><a href="/archives/2accc063.html">WeeklyPEP-0-overview</a></li>  <li class="file"><a href="/archives/f5b4f56.html">所谓 ASGI</a></li>  <li class="file"><a href="/archives/5823d5df.html">WeeklyPEP-2-PEP 343-with 语句-overview</a></li>  <li class="file"><a href="/archives/291be77c.html">解剖 Python 类</a></li>  <li class="file"><a href="/archives/c29b4f3b.html">WeeklyPEP-3-PEP 318-函数装饰器-overview</a></li>  <li class="file"><a href="/archives/7eaf0f5f.html">WeeklyPEP-8-PEP 492-使用 async 和 await 语法的协程-overview</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Shell
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/archives/8f9d5c85.html">Shell 获取当前脚本的绝对路径</a></li>  <li class="file"><a href="/archives/dbac95ae.html">实现 echo 不换行输出</a></li>  <li class="file"><a href="/archives/b422aa7d.html">Shell 区分不同 Unix 系统</a></li>  <li class="file"><a href="/archives/3beb222a.html">Shell 基础语法</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            汇编语言
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file active"><a href="/archives/90a7f914.html">NASM Overview</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
        
  <div class="toc-flag"></div>
  <div class="toc-wrap">
      <h3>
          <span>文章目录</span>
      </h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#句型句式"><span class="toc-number">2.</span> <span class="toc-text">句型句式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#空格"><span class="toc-number">2.1.</span> <span class="toc-text">空格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#行连接"><span class="toc-number">2.2.</span> <span class="toc-text">行连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标签（label）"><span class="toc-number">2.3.</span> <span class="toc-text">标签（label）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#局部标签（loacal-label）"><span class="toc-number">2.3.1.</span> <span class="toc-text">局部标签（loacal label）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊指令（符号）"><span class="toc-number">3.</span> <span class="toc-text">特殊指令（符号）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#：转义操作符"><span class="toc-number">3.1.</span> <span class="toc-text">&#96;&#96;：转义操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#：索引操作符"><span class="toc-number">3.2.</span> <span class="toc-text">[]：索引操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#和"><span class="toc-number">3.3.</span> <span class="toc-text">\$ 和 $$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ptr"><span class="toc-number">3.4.</span> <span class="toc-text">ptr</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#伪指令"><span class="toc-number">4.</span> <span class="toc-text">伪指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#表明指令操作数据大小"><span class="toc-number">4.1.</span> <span class="toc-text">表明指令操作数据大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#db-家族：定义初始化数据"><span class="toc-number">4.2.</span> <span class="toc-text">db 家族：定义初始化数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resb-家族：定义非初始化数据"><span class="toc-number">4.3.</span> <span class="toc-text">resb 家族：定义非初始化数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#incbin：包含二进制文件"><span class="toc-number">4.4.</span> <span class="toc-text">incbin：包含二进制文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#equ：定义常量"><span class="toc-number">4.5.</span> <span class="toc-text">equ：定义常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#times：重复执行"><span class="toc-number">4.6.</span> <span class="toc-text">times：重复执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unicode-字符串"><span class="toc-number">4.7.</span> <span class="toc-text">Unicode 字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SECTION-SEGMENT：自定义段"><span class="toc-number">4.8.</span> <span class="toc-text">SECTION | SEGMENT：自定义段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据传送指令"><span class="toc-number">5.</span> <span class="toc-text">数据传送指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通用数据传送指令"><span class="toc-number">5.1.</span> <span class="toc-text">通用数据传送指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mov"><span class="toc-number">5.1.1.</span> <span class="toc-text">mov</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#movsx"><span class="toc-number">5.1.2.</span> <span class="toc-text">movsx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#movzx"><span class="toc-number">5.1.3.</span> <span class="toc-text">movzx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#push"><span class="toc-number">5.1.4.</span> <span class="toc-text">push</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pop"><span class="toc-number">5.1.5.</span> <span class="toc-text">pop</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pusha"><span class="toc-number">5.1.6.</span> <span class="toc-text">pusha</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#popa"><span class="toc-number">5.1.7.</span> <span class="toc-text">popa</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pushad"><span class="toc-number">5.1.8.</span> <span class="toc-text">pushad</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#popad"><span class="toc-number">5.1.9.</span> <span class="toc-text">popad</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bswap"><span class="toc-number">5.1.10.</span> <span class="toc-text">bswap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xchg"><span class="toc-number">5.1.11.</span> <span class="toc-text">xchg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmpxchg"><span class="toc-number">5.1.12.</span> <span class="toc-text">cmpxchg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xadd"><span class="toc-number">5.1.13.</span> <span class="toc-text">xadd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xlat"><span class="toc-number">5.1.14.</span> <span class="toc-text">xlat</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输入输出端口传送指令"><span class="toc-number">5.2.</span> <span class="toc-text">输入输出端口传送指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#目的地之传送指令"><span class="toc-number">5.3.</span> <span class="toc-text">目的地之传送指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标志传送指令"><span class="toc-number">5.4.</span> <span class="toc-text">标志传送指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#算数运算指令"><span class="toc-number">6.</span> <span class="toc-text">算数运算指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#add"><span class="toc-number">6.1.</span> <span class="toc-text">add</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#adc"><span class="toc-number">6.2.</span> <span class="toc-text">adc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inc"><span class="toc-number">6.3.</span> <span class="toc-text">inc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sub"><span class="toc-number">6.4.</span> <span class="toc-text">sub</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sbb"><span class="toc-number">6.5.</span> <span class="toc-text">sbb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dec"><span class="toc-number">6.6.</span> <span class="toc-text">dec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#neg"><span class="toc-number">6.7.</span> <span class="toc-text">neg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmp"><span class="toc-number">6.8.</span> <span class="toc-text">cmp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aas"><span class="toc-number">6.9.</span> <span class="toc-text">aas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ads"><span class="toc-number">6.10.</span> <span class="toc-text">ads</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mul"><span class="toc-number">6.11.</span> <span class="toc-text">mul</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#imul"><span class="toc-number">6.12.</span> <span class="toc-text">imul</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aam"><span class="toc-number">6.13.</span> <span class="toc-text">aam</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#div"><span class="toc-number">6.14.</span> <span class="toc-text">div</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#idiv"><span class="toc-number">6.15.</span> <span class="toc-text">idiv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aad"><span class="toc-number">6.16.</span> <span class="toc-text">aad</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cbw"><span class="toc-number">6.17.</span> <span class="toc-text">cbw</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cwd"><span class="toc-number">6.18.</span> <span class="toc-text">cwd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cwde"><span class="toc-number">6.19.</span> <span class="toc-text">cwde</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cdq"><span class="toc-number">6.20.</span> <span class="toc-text">cdq</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑运算指令"><span class="toc-number">7.</span> <span class="toc-text">逻辑运算指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#and"><span class="toc-number">7.1.</span> <span class="toc-text">and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#or"><span class="toc-number">7.2.</span> <span class="toc-text">or</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xor"><span class="toc-number">7.3.</span> <span class="toc-text">xor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not"><span class="toc-number">7.4.</span> <span class="toc-text">not</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test"><span class="toc-number">7.5.</span> <span class="toc-text">test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shl-amp-sal"><span class="toc-number">7.6.</span> <span class="toc-text">shl &amp; sal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shr-amp-sar"><span class="toc-number">7.7.</span> <span class="toc-text">shr &amp; sar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rol"><span class="toc-number">7.8.</span> <span class="toc-text">rol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ror"><span class="toc-number">7.9.</span> <span class="toc-text">ror</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rcr"><span class="toc-number">7.10.</span> <span class="toc-text">rcr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rcl"><span class="toc-number">7.11.</span> <span class="toc-text">rcl</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#串指令"><span class="toc-number">8.</span> <span class="toc-text">串指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#movs-movsb-movsw-movsd"><span class="toc-number">8.1.</span> <span class="toc-text">movs(movsb, movsw, movsd)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmps"><span class="toc-number">8.2.</span> <span class="toc-text">cmps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scas"><span class="toc-number">8.3.</span> <span class="toc-text">scas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lods"><span class="toc-number">8.4.</span> <span class="toc-text">lods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stos"><span class="toc-number">8.5.</span> <span class="toc-text">stos</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rep"><span class="toc-number">8.6.</span> <span class="toc-text">rep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repe-amp-repz"><span class="toc-number">8.7.</span> <span class="toc-text">repe &amp; repz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repne-amp-repnz"><span class="toc-number">8.8.</span> <span class="toc-text">repne &amp; repnz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repc"><span class="toc-number">8.9.</span> <span class="toc-text">repc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repnc"><span class="toc-number">8.10.</span> <span class="toc-text">repnc</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#程序转移指令"><span class="toc-number">9.</span> <span class="toc-text">程序转移指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#无条件转移指令"><span class="toc-number">9.1.</span> <span class="toc-text">无条件转移指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#offset"><span class="toc-number">9.1.1.</span> <span class="toc-text">offset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jmp"><span class="toc-number">9.1.2.</span> <span class="toc-text">jmp</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#描述"><span class="toc-number">9.1.2.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#语法"><span class="toc-number">9.1.2.2.</span> <span class="toc-text">语法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件转移指令"><span class="toc-number">9.2.</span> <span class="toc-text">条件转移指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jz-je-amp-jnz-jne-零判断（相等判断）"><span class="toc-number">9.2.1.</span> <span class="toc-text">jz(je) &amp; jnz(jne) | 零判断（相等判断）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jc-amp-jnc-进位判断"><span class="toc-number">9.2.2.</span> <span class="toc-text">jc &amp; jnc | 进位判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jp-jpe-amp-jnp-jpo-奇偶判断"><span class="toc-number">9.2.3.</span> <span class="toc-text">jp(jpe) &amp; jnp(jpo) | 奇偶判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js-amp-jns-正负判断"><span class="toc-number">9.2.4.</span> <span class="toc-text">js &amp; jns | 正负判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jo-amp-jno"><span class="toc-number">9.2.5.</span> <span class="toc-text">jo &amp; jno</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#循环控制指令"><span class="toc-number">9.3.</span> <span class="toc-text">循环控制指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#终端指令"><span class="toc-number">9.4.</span> <span class="toc-text">终端指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#处理器控制指令"><span class="toc-number">10.</span> <span class="toc-text">处理器控制指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#标志操作指令"><span class="toc-number">10.1.</span> <span class="toc-text">标志操作指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#stc-amp-clc-amp-cmc"><span class="toc-number">10.1.1.</span> <span class="toc-text">stc &amp; clc &amp; cmc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#std-amp-cld"><span class="toc-number">10.1.2.</span> <span class="toc-text">std &amp; cld</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sti-amp-cli"><span class="toc-number">10.1.3.</span> <span class="toc-text">sti &amp; cli</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-number">11.</span> <span class="toc-text">参考</span></a></li></ol>
  </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-3-计算机科学/1-理论计算机科学/4-编程语言和编译器/汇编语言/NASM Overview" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/">3-计算机科学</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/1-%E7%90%86%E8%AE%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/">1-理论计算机科学</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/1-%E7%90%86%E8%AE%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/4-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8/">4-编程语言和编译器</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/1-%E7%90%86%E8%AE%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/4-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/">汇编语言</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/" rel="tag">汇编语言</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/90a7f914.html">
            <time datetime="2021-02-05T00:00:00.000Z" itemprop="datePublished">2021-02-05</time>
        </a>
    </div>


                        
                            <i class="fa fa-bar-chart"></i>
                            <span id="busuanzi_container_site_pv"><span id="busuanzi_value_page_pv"></span></span>    
                        
                        
                            <div class="article-meta-button">
                                <a href="https://github.com/ryomahan/wiki/raw/main/source/_posts/3-计算机科学/1-理论计算机科学/4-编程语言和编译器/汇编语言/NASM Overview.md" target="_blank" rel="external nofollow noopener noreferrer"> Source </a>
                            </div>
                            <div class="article-meta-button">
                                <a href="https://github.com/ryomahan/wiki/edit/main/source/_posts/3-计算机科学/1-理论计算机科学/4-编程语言和编译器/汇编语言/NASM Overview.md" target="_blank" rel="external nofollow noopener noreferrer"> Edit </a>
                            </div>
                            <div class="article-meta-button">
                                <a href="https://github.com/ryomahan/wiki/commits/main/source/_posts/3-计算机科学/1-理论计算机科学/4-编程语言和编译器/汇编语言/NASM Overview.md" target="_blank" rel="external nofollow noopener noreferrer"> History </a>
                            </div>
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            NASM Overview
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
        
            <!-- 内容失效提醒 -->
            
    <!-- 如果文章创建超过一年或最后一次更新时间超过一个月(默认)则提示文章过期 -->
    
        <div class="aging">
            <i class="fa fa-exclamation-circle aging-icon" aria-hidden="true"></i>
            <span class="aging-content">请注意：本文编写于 <span class="aging-content-date">2021-02-05</span>，其中某些信息可能已经失去时效性。</span>
        </div>
    

            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>机器指令是用二进制代码表示的 CPU 能够直接识别和执行的一种指令，不同的 CPU 架构有不同的机器指令集。汇编指令是将机器指令对应到便于记忆和书写的字符串（<strong>注意并非一一对应，同一汇编器可能存在多个汇编指令对应一个机器指令的情况</strong>），汇编指令编写完成后通过<strong>汇编器</strong>将其翻译成机器指令供 CPU 执行。</p>
<p><strong>不同汇编器针对同一机器指令可以有不同的汇编指令表达方式，只要汇编器最终能够正确无误地翻译就可以。</strong> 不同的汇编器对应不同的汇编指令格式，不同的汇编指令格式衍生出不同的汇编指令语法。没有一种汇编器可以将所有的汇编语法都正确地翻译成机器指令，因此，随着计算机的发展，不同厂家形成了自家的汇编语言体系并拥有自己的汇编器。</p>
<p>常见的汇编器有：GNU Assembler(GAS) | Microsoft Macro Assembler(MASM) | Netwide Assembler(NASM) | Flat Assembler(FASM) 等。GAS 使用 AT&amp;T 汇编语法，MASM 使用 Intel 汇编语法，NASM 使用的汇编语法和 Intel 汇编语法类似但要更简单一些。</p>
<p><strong>注：本文以 NASM 使用的汇编语法为例</strong></p>
<h2 id="句型句式"><a href="#句型句式" class="headerlink" title="句型句式"></a>句型句式</h2><p>NASM 的基本句型可以由四部分组成：<code>label: instruction operand(s) ; comment</code>。</p>
<p>理论上来说上面的四个部分都是可选的，但至少存在其中一个部分，一个语句可以没有指令而只存在一个标签。</p>
<p>而标签后的冒号也是可以省略的。</p>
<h3 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h3><p>NASM 语法对空格数量没有要求和限制，可以在任何两个部分的间隙添加任意数量的空格（至少一个用来区分两个部分）。</p>
<h3 id="行连接"><a href="#行连接" class="headerlink" title="行连接"></a>行连接</h3><p>在 NASM 中使用反斜杠（\）作为行的延续符，如果一行以反斜杠结束，则当前行的下一行被认为是当前行的延续。</p>
<h3 id="标签（label）"><a href="#标签（label）" class="headerlink" title="标签（label）"></a>标签（label）</h3><p>标签可以使用字母、数字、下划线（_）、美元符（$）、井号（#）、艾特（@）、波浪线（~）、英文句号（.）、英文问号（?），其中字母、下划线（_）、英文句号（.）和英文问号（?）。其中以英文句号（.）开头有特殊的含义（详情见下文）。</p>
<h4 id="局部标签（loacal-label）"><a href="#局部标签（loacal-label）" class="headerlink" title="局部标签（loacal label）"></a>局部标签（loacal label）</h4><p>在 NASM 中所以英文句号（.）开头的的标签会被视为局部标签，所有局部标签会被认为与上一个非局部标签有关联。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">label1:</span><br><span class="line">    some code</span><br><span class="line"></span><br><span class="line">.loop:</span><br><span class="line">    some code</span><br><span class="line">    jne .loop</span><br><span class="line">    ret</span><br><span class="line"></span><br><span class="line">label2:</span><br><span class="line">    some code</span><br><span class="line"></span><br><span class="line">.loop:</span><br><span class="line">    some code</span><br><span class="line">    jne .loop</span><br><span class="line">    ret</span><br><span class="line"></span><br><span class="line">label3:</span><br><span class="line">    some code</span><br><span class="line">    jmp label1.loop</span><br></pre></td></tr></table></figure>

<p>在上述代码片段中，所有的 jne 指令都会跳转到上面与之相邻的 .loop 标签，因为 .loop 标签的定义形式是一种局部标签定义形式，因此两个 .loop 标签分别会与该标签上面最近的全局标签产生关联。而在为特别指定的情况下局部标签只能在与其相关的全局标签下生效，但也可以通过「全局标签.局部标签」的形式进行调用。</p>
<h2 id="特殊指令（符号）"><a href="#特殊指令（符号）" class="headerlink" title="特殊指令（符号）"></a>特殊指令（符号）</h2><h3 id="：转义操作符"><a href="#：转义操作符" class="headerlink" title="``：转义操作符"></a>``：转义操作符</h3><p>NASM 使用 C 风格的转义字符，在反斜杠后跟转义码，转义码包括：字符转义码、八进制转义码、十六进制转义码，且转移字符需要使用反引号引用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db &#96;\x61&#96; ; 等同于 db a</span><br></pre></td></tr></table></figure>

<p><strong>注：反引号也可以用来定义普通字符串</strong></p>
<h3 id="：索引操作符"><a href="#：索引操作符" class="headerlink" title="[]：索引操作符"></a>[]：索引操作符</h3><p>有的地方称为「索引操作符」，表示一种间接取操作数的方式，即取括号内内存地址对应的操作数，类似 C 语言的指针概念。</p>
<p>括号中一般存放的是一个内存地址，可以是使用寄存器表示的内存地址，可以是使用标记表示的内存地址，也可以是直接用操作数表示的内存地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov ax, [var]</span><br><span class="line">mov byte [es:0x00], &#39;L&#39;</span><br></pre></td></tr></table></figure>

<h3 id="和"><a href="#和" class="headerlink" title="\$ 和 $$"></a>\$ 和 $$</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$   表示经过 NASM 编译后当前指令位置；</span><br><span class="line">$$  表示经过 NASM 编译后当前 section 起始位置；</span><br></pre></td></tr></table></figure>

<h3 id="ptr"><a href="#ptr" class="headerlink" title="ptr"></a>ptr</h3><p>ptr -&gt; pointer 即指针的缩写，用来临时指定类型，可以类比为 C 语言中的强制类型转换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov ax, bx            ; 由于寄存器 ax 和 bx 都是 word 型，所以没有必要加 word</span><br><span class="line">mov ax, word ptr [bx] ; 取出内存地址是 ds:bx 的值转换为 word 型存放到 ax 处</span><br></pre></td></tr></table></figure>

<h2 id="伪指令"><a href="#伪指令" class="headerlink" title="伪指令"></a>伪指令</h2><p>伪指令不是真正的指令，而是为了方便 NASM 汇编器而存在，但是它们的地位与真正的指令相同。</p>
<h3 id="表明指令操作数据大小"><a href="#表明指令操作数据大小" class="headerlink" title="表明指令操作数据大小"></a>表明指令操作数据大小</h3><p>通常存在于操作指令和操作数之间，用来表明操作指令使用的操作数单位大小。</p>
<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">代表数据大小（位）</th>
</tr>
</thead>
<tbody><tr>
<td align="center">byte</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">word</td>
<td align="center">16</td>
</tr>
<tr>
<td align="center">dword</td>
<td align="center">32</td>
</tr>
<tr>
<td align="center">qword</td>
<td align="center">64</td>
</tr>
<tr>
<td align="center">tword</td>
<td align="center">80</td>
</tr>
<tr>
<td align="center">oword</td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">yword</td>
<td align="center">256</td>
</tr>
</tbody></table>
<h3 id="db-家族：定义初始化数据"><a href="#db-家族：定义初始化数据" class="headerlink" title="db 家族：定义初始化数据"></a>db 家族：定义初始化数据</h3><p>一系列用来声明并初始化数据的伪指令：</p>
<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">功能</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">db</td>
<td align="center">定义字节数据</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">dw</td>
<td align="center">定义字数据</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">dd</td>
<td align="center">定义双字数据</td>
<td align="center">可以定义单精度浮点数</td>
</tr>
<tr>
<td align="center">dq</td>
<td align="center">定义四字数据</td>
<td align="center">可以定义双精度浮点数</td>
</tr>
<tr>
<td align="center">dt</td>
<td align="center">定义十字数据</td>
<td align="center">可以定义扩展精度浮点数</td>
</tr>
<tr>
<td align="center">do</td>
<td align="center">定义 oword</td>
<td align="center">可以定义四精度浮点数</td>
</tr>
<tr>
<td align="center">dy</td>
<td align="center">定义 yword</td>
<td align="center">可以定义 ymm 数据</td>
</tr>
</tbody></table>
<p><strong>注：dt do dy 不接受整型数值。</strong></p>
<h3 id="resb-家族：定义非初始化数据"><a href="#resb-家族：定义非初始化数据" class="headerlink" title="resb 家族：定义非初始化数据"></a>resb 家族：定义非初始化数据</h3><p>相比于 db 家族 resb 家族的指令只会在编译阶段声明一个未初始化的出处空间但并不会为其设置初始值。</p>
<p>resb: reserve byte</p>
<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">resb</td>
<td align="center">以字节为单位声明一段未初始化数据</td>
</tr>
<tr>
<td align="center">resw</td>
<td align="center">以字为单位声明一段未初始化数据</td>
</tr>
<tr>
<td align="center">resd</td>
<td align="center">以双字节为单位声明一段未初始化数据</td>
</tr>
<tr>
<td align="center">resq</td>
<td align="center">以四字为单位声明一段未初始化数据</td>
</tr>
<tr>
<td align="center">rest</td>
<td align="center">以十字为单位声明一段未初始化数据</td>
</tr>
<tr>
<td align="center">reso</td>
<td align="center">以 oword 为单位声明一段未初始化数据</td>
</tr>
<tr>
<td align="center">resy</td>
<td align="center">以 yword 为单位声明一段未初始化数据</td>
</tr>
</tbody></table>
<h3 id="incbin：包含二进制文件"><a href="#incbin：包含二进制文件" class="headerlink" title="incbin：包含二进制文件"></a>incbin：包含二进制文件</h3><p>NASM 提供了一种包含二进制文件的方法，即使用 incbin 伪指令，此伪指令的作用是包含 graphics 以及 sound 这类数据文件。</p>
<h3 id="equ：定义常量"><a href="#equ：定义常量" class="headerlink" title="equ：定义常量"></a>equ：定义常量</h3><p>equ 伪指令用来为某个标识符赋值一个整型常量，作用类似于 C 语言的 #define：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a equ 0             ; 正确</span><br><span class="line">b equ &#39;abcd&#39;        ; 可执行，b &#x3D; 0x64636261</span><br><span class="line">c equ &#39;abcdefghi&#39;   ; 可执行会提示 warning，c &#x3D; 0x64636261</span><br><span class="line">d equ 1.2           ; 错误</span><br></pre></td></tr></table></figure>

<p>在例子中，b 和 c 存储的是字符串对应的 ASCII 码，而因为整型常量最大是 quadword(8 bytes)，因此 c 对应的字符串会被自动截断为 ‘abcd’。而 d 存储的是非整型值，因此会报错。</p>
<h3 id="times：重复执行"><a href="#times：重复执行" class="headerlink" title="times：重复执行"></a>times：重复执行</h3><p>用来重复指令（或伪指令），下面是一个比较经典的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">; 用于填充引导代码</span><br><span class="line">times 510-($-$$) db 0</span><br><span class="line">dw 0xaa55</span><br></pre></td></tr></table></figure>

<h3 id="Unicode-字符串"><a href="#Unicode-字符串" class="headerlink" title="Unicode 字符串"></a>Unicode 字符串</h3><p>NASM 顶一个两个操作数符来定义 Unicode 字符串：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dw __utf16__(&#39;你好世界&#39;)</span><br><span class="line">dd __utf32__(&#39;你好世界&#39;)</span><br></pre></td></tr></table></figure>

<h3 id="SECTION-SEGMENT：自定义段"><a href="#SECTION-SEGMENT：自定义段" class="headerlink" title="SECTION | SEGMENT：自定义段"></a>SECTION | SEGMENT：自定义段</h3><p>在 NASM 中 SECTION 和 SEGMENT 指令是相同的同义词，可以改变所写代码被分配到哪一个 section 中。在一些 object file 中，section 的数量是固定的；在其他格式中，用户可以根据自己的需求来自定义 section。</p>
<p><strong>本章节以 NASM 的 bin output formats 为例讲解多 section 用法</strong></p>
<p>NASM 支持标准的 .data .text .bss，编译后程序文件中内存地址的顺序是 .text .data 用户 section，同名 section 编译后会放在同一块连续的内存上。</p>
<p>section 特性：</p>
<ul>
<li>section 可以被指定为 progbits 或 nobits，默认为 probits（.bss 默认为 nobits）。</li>
<li>section 可以在定义时使用 <code>align=</code> 或 <code>start=</code> 字句在指定对齐字节，区别是 align 只接受 2 的 N 次幂，而 start 可以接受任意整数值；</li>
<li>section 可以在定义时使用 <code>vstart=</code> 字句定义一个虚拟起始地址，它将被用于计算该 section 内的所有内存引用；</li>
<li>section 可以在定义时使用 <code>follows=&lt;section&gt;</code> 或 <code>vfollows=&lt;section&gt;</code> 字句来进行排序；</li>
<li>显示定义的 section 之前的所有代码默认会存储在 .text section 中；</li>
<li>如果没有给出 ORG 语句，则 ORG 默认为零；</li>
<li>除非显示指定了 start= vstart= follows 或 vfollow，否则 .bss section 将被放在最后一个 progbits section 之后；</li>
<li>除非显示指定了对齐方式，否则所有 sectioin 都以 dword(4 bytes) 为边界对齐；</li>
<li>section 不能出现重叠；</li>
<li>NASM 为每个 section 提供了一个隐藏标签 <code>section.&lt;secname&gt;.start</code> 用来获取该 section 起始地址；</li>
</ul>
<p>拓展：<br>progbits：程序内容，包含代码、数据、调试相关信息；<br>nobits：和PROGBITS类似，唯一不同的是在文件中不占空间，对应的进行内存空间是加载的时候申请的；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db &#39;11&#39;</span><br><span class="line">section test1 align&#x3D;16</span><br><span class="line">db &#39;12&#39;</span><br><span class="line">section test2 start&#x3D;12</span><br><span class="line">db &#39;13&#39;</span><br><span class="line">section test3 vstart&#x3D;0x7c00</span><br><span class="line">db &#39;14&#39;</span><br><span class="line">section test4 follows&#x3D;test1</span><br><span class="line">db &#39;15&#39;</span><br><span class="line">section .text start&#x3D;100</span><br><span class="line">db &#39;16&#39;</span><br></pre></td></tr></table></figure>

<p><img src="https://img.blanc.site//wiki/img/20210812231023.png" alt="编译结果"></p>
<h2 id="数据传送指令"><a href="#数据传送指令" class="headerlink" title="数据传送指令"></a>数据传送指令</h2><h3 id="通用数据传送指令"><a href="#通用数据传送指令" class="headerlink" title="通用数据传送指令"></a>通用数据传送指令</h3><h4 id="mov"><a href="#mov" class="headerlink" title="mov"></a>mov</h4><h4 id="movsx"><a href="#movsx" class="headerlink" title="movsx"></a>movsx</h4><h4 id="movzx"><a href="#movzx" class="headerlink" title="movzx"></a>movzx</h4><h4 id="push"><a href="#push" class="headerlink" title="push"></a>push</h4><h4 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h4><h4 id="pusha"><a href="#pusha" class="headerlink" title="pusha"></a>pusha</h4><h4 id="popa"><a href="#popa" class="headerlink" title="popa"></a>popa</h4><h4 id="pushad"><a href="#pushad" class="headerlink" title="pushad"></a>pushad</h4><h4 id="popad"><a href="#popad" class="headerlink" title="popad"></a>popad</h4><h4 id="bswap"><a href="#bswap" class="headerlink" title="bswap"></a>bswap</h4><h4 id="xchg"><a href="#xchg" class="headerlink" title="xchg"></a>xchg</h4><h4 id="cmpxchg"><a href="#cmpxchg" class="headerlink" title="cmpxchg"></a>cmpxchg</h4><h4 id="xadd"><a href="#xadd" class="headerlink" title="xadd"></a>xadd</h4><h4 id="xlat"><a href="#xlat" class="headerlink" title="xlat"></a>xlat</h4><h3 id="输入输出端口传送指令"><a href="#输入输出端口传送指令" class="headerlink" title="输入输出端口传送指令"></a>输入输出端口传送指令</h3><h3 id="目的地之传送指令"><a href="#目的地之传送指令" class="headerlink" title="目的地之传送指令"></a>目的地之传送指令</h3><h3 id="标志传送指令"><a href="#标志传送指令" class="headerlink" title="标志传送指令"></a>标志传送指令</h3><h2 id="算数运算指令"><a href="#算数运算指令" class="headerlink" title="算数运算指令"></a>算数运算指令</h2><p>算数运算指令主要包括二进制的定点、浮点的加减乘除运算指令；求反、求补、加一、减一、比较指令；十进制加减运算指令等；不同计算机对算数运算指令的支持有很大的差别。</p>
<h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><p><code>add &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>影响标志位：OF，SF，ZF，AF，PF，CF。<br>将源操作数加到目的操作数上（结果存储在目的操作数上）。<br>源操作数和目的操作数类型必须一致，且两者不能同时使用存储器操作数。</p>
<h3 id="adc"><a href="#adc" class="headerlink" title="adc"></a>adc</h3><p><code>adc &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>带进位加法指令，与 ADD 基本相同，区别在于执行指令前会将标志位 CF 的值加到目的操作数上，多用于多字节加法运算。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mov DX, 0x2FFF</span><br><span class="line">mov AX, 0xFF00</span><br><span class="line">add AX, 0x5678</span><br><span class="line">adc dx, 0x1234</span><br><span class="line">; 以上指令实现了多字节数 0x2FFFFF00 与 0x12345678 相加</span><br><span class="line">; 其中 DX 存放 0x2FFF + 0x1234 AX 存放 0xFF00 + 0x5678</span><br><span class="line">; 执行第三步时，低 8 位进行相加，0xFF00 + 0x5678 &#x3D; 0x5578，此时进位标志位 CF&#x3D;1</span><br><span class="line">; 执行第四步时，高 8 位进行相加，0x2FFF + 0x1234 &#x3D; 0x4233，之后加上进位标志位的进位数， DX &#x3D; 0x4234</span><br><span class="line">; 最终得到 0x2FFFFF00 + 0x12345678 &#x3D; 0x42345578</span><br></pre></td></tr></table></figure>

<h3 id="inc"><a href="#inc" class="headerlink" title="inc"></a>inc</h3><p><code>inc &lt;目的操作数&gt;</code></p>
<p>加一指令，将目的操作数加一。</p>
<h3 id="sub"><a href="#sub" class="headerlink" title="sub"></a>sub</h3><p><code>sub &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>用目的操作数减去源操作数（结果存储在目的操作数上）。<br>源操作数和目的操作数类型必须一致，且两者不能同时使用存储器操作数。</p>
<h3 id="sbb"><a href="#sbb" class="headerlink" title="sbb"></a>sbb</h3><h3 id="dec"><a href="#dec" class="headerlink" title="dec"></a>dec</h3><p><code>dec &lt;目的操作数&gt;</code></p>
<p>减一指令，将目的操作数减一。</p>
<h3 id="neg"><a href="#neg" class="headerlink" title="neg"></a>neg</h3><p><code>neg &lt;目的操作数&gt;</code></p>
<p>用于求目的操作数的补码（取反再加一）。<br>可以通过寄存器或内存单元向 neg 指令传送目的操作数。</p>
<h3 id="cmp"><a href="#cmp" class="headerlink" title="cmp"></a>cmp</h3><p>用于比较源操作数和目的操作数。</p>
<p>cmp 指令类似 sub 指令，只是不保存计算结果但对标志寄存器产生影响，其他指令可以通过识别这些被影响的标志寄存器位来得知比较结果。</p>
<p>在指令中，目的操作数是被测量的对象，源操作数则作为测量的基准。指令使用目的操作数减去源操作数并在不保存结果的情况下对标志寄存器产生影响。</p>
<p>会被产生影响的标志位有：溢出 符号 零 进位 辅助进位 奇偶 | OF SF ZF CF AF PF</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov ax, 8</span><br><span class="line">mov bx, 3</span><br><span class="line">cmp ax, bx</span><br><span class="line">; 执行结果 ax &#x3D; 8 | ZF &#x3D; 0 | PF &#x3D; 1 | SF &#x3D; 0 | CF &#x3D; 0 | OF &#x3D; 0</span><br></pre></td></tr></table></figure>

<h3 id="aas"><a href="#aas" class="headerlink" title="aas"></a>aas</h3><h3 id="ads"><a href="#ads" class="headerlink" title="ads"></a>ads</h3><h3 id="mul"><a href="#mul" class="headerlink" title="mul"></a>mul</h3><p><code>mul &lt;源操作数&gt;</code></p>
<p>无符号乘法运算，结果为整数。<br>mul 指令可以通过寄存器或内存单元接受一个 8 位或 16 位的乘数：<br>如果乘数是 8 位的：那么源操作数与寄存器 AL 中的 8 位数相乘得到的结果存储在 AX 中；<br>如果乘数是 16 位的：那么源操作数与寄存器 AX 中的 16 位数相乘得到的结果存储在 DX:AX 中；</p>
<p>mul 执行后，如果结果的高位全是零则 OF 和 CF 清零，否则置一，对 SF ZF AF 和 PF 标志位影响未定义。</p>
<h3 id="imul"><a href="#imul" class="headerlink" title="imul"></a>imul</h3><h3 id="aam"><a href="#aam" class="headerlink" title="aam"></a>aam</h3><h3 id="div"><a href="#div" class="headerlink" title="div"></a>div</h3><p><code>div &lt;源操作数&gt;</code></p>
<p>用于进行无符号除法运算，结果为整数。<br>除数作为源操作数传入，存储在寄存器或内存单元中。<br>被除数默认存放在 AX（16 位以内）或 AX 和 DX（32 位，DX 存放高位，AX 存放低位）中。</p>
<p>div 操作的结果分为商和余数两部分。<br>如果除数是 8 位的，那么结果中的商存储在 AL 中，余数存储在 AH 中。<br>如果除数是 16 位的，那么结果中的商存储在 AX 中，余数存储在 DX 中。</p>
<p>执行条件：</p>
<ol>
<li>被除数的高位必须小于除数（否则商无法存储）；</li>
<li>若除数为 16 位，则在运行 div 指令前需要清零 DX 寄存器；</li>
</ol>
<h3 id="idiv"><a href="#idiv" class="headerlink" title="idiv"></a>idiv</h3><h3 id="aad"><a href="#aad" class="headerlink" title="aad"></a>aad</h3><h3 id="cbw"><a href="#cbw" class="headerlink" title="cbw"></a>cbw</h3><p><code>cbw</code></p>
<p>将寄存器 AL 中数据的最高位扩展到 AH 中，若 AL 中最高位为 0，则 AH 被设置为 00H，若 AL 中的最高位为 1，则 AH 被设置为 FFH。</p>
<h3 id="cwd"><a href="#cwd" class="headerlink" title="cwd"></a>cwd</h3><p><code>cwd</code></p>
<p>将寄存器 AX 中数据的最高位拓展到 DX中，若 AX 中最高位为 0，则 DX 被设置为 0000H，若 AX 中的最高位为 1，则 DX 被设置为 FFFFH。</p>
<h3 id="cwde"><a href="#cwde" class="headerlink" title="cwde"></a>cwde</h3><h3 id="cdq"><a href="#cdq" class="headerlink" title="cdq"></a>cdq</h3><h2 id="逻辑运算指令"><a href="#逻辑运算指令" class="headerlink" title="逻辑运算指令"></a>逻辑运算指令</h2><h3 id="and"><a href="#and" class="headerlink" title="and"></a>and</h3><p><code>and &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>将目的操作数和源操作数进行按位逻辑与运算，结果存储在目的操作数。</p>
<h3 id="or"><a href="#or" class="headerlink" title="or"></a>or</h3><p><code>or &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>将目的操作数和源操作数进行按位逻辑或运算，结果存储在目的操作数。</p>
<h3 id="xor"><a href="#xor" class="headerlink" title="xor"></a>xor</h3><p><code>xor &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>将目的操作数和源操作数进行按位逻辑异或运算，结果存储在目的操作数。</p>
<h3 id="not"><a href="#not" class="headerlink" title="not"></a>not</h3><p><code>not &lt;目的操作数&gt;</code></p>
<p>将目的操作数按位取反，结果存储在目的操作数。</p>
<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><p><code>test &lt;目的操作数&gt;, &lt;源操作数&gt;</code></p>
<p>将目的操作数和源操作数进行按位逻辑与运算，不存储结果。</p>
<h3 id="shl-amp-sal"><a href="#shl-amp-sal" class="headerlink" title="shl &amp; sal"></a>shl &amp; sal</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shl &lt;目的操作数&gt; &lt;源操作数（移位次数）&gt;</span><br><span class="line">sal &lt;目的操作数&gt; &lt;源操作数（移位次数）&gt;</span><br></pre></td></tr></table></figure>

<p>shl（逻辑左移）和 sal（算数左移）的实际效果完全相同。<br>两者的作用是：将目的操作数向左移位源操作数个位数，最低位用 0 填充，最高位移入进位标志位（CF）。</p>
<h3 id="shr-amp-sar"><a href="#shr-amp-sar" class="headerlink" title="shr &amp; sar"></a>shr &amp; sar</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shr &lt;目的操作数&gt; &lt;源操作数（移位次数）&gt;</span><br><span class="line">sar &lt;目的操作数&gt; &lt;源操作数（移位次数）&gt;</span><br></pre></td></tr></table></figure>

<p>shr（逻辑右移）和 sar（算数右移）有所不同：<br>shr：高位用 0 填充，低位移入进位标志位（CF）。<br>sar：高位用符号位填充，低位移入进位标志位（CF）。</p>
<h3 id="rol"><a href="#rol" class="headerlink" title="rol"></a>rol</h3><p><code>rol &lt;目的操作数&gt;, &lt;源操作数（移位次数）&gt;</code></p>
<p>rol(Rotate Left)：循环左移指令，将目的操作数左移指定次数，最高位送入最低位和进位标志位（CF）。</p>
<h3 id="ror"><a href="#ror" class="headerlink" title="ror"></a>ror</h3><p><code>ror &lt;目的操作数&gt;, &lt;源操作数（移位次数）&gt;</code></p>
<p>ror(Rotate Right)：循环右移指令，将目的操作数右移指定次数，最低位送入最高位和进位标志位（CF）。</p>
<h3 id="rcr"><a href="#rcr" class="headerlink" title="rcr"></a>rcr</h3><h3 id="rcl"><a href="#rcl" class="headerlink" title="rcl"></a>rcl</h3><h2 id="串指令"><a href="#串指令" class="headerlink" title="串指令"></a>串指令</h2><h3 id="movs-movsb-movsw-movsd"><a href="#movs-movsb-movsw-movsd" class="headerlink" title="movs(movsb, movsw, movsd)"></a>movs(movsb, movsw, movsd)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">movsw     ; 执行一次</span><br><span class="line">rep movsw ; 利用 rep 命令重复执行</span><br></pre></td></tr></table></figure>

<p>串传送，从源地址向目的地址批量传送数据。<br>16 位模式下源地址是 <code>DS:SI</code>，目的地址是 <code>ES:DI</code>。<br>32 位模式下源地址是 <code>DS:ESI</code>，目的地址是 <code>ES:EDI</code>。<br>根据传送数据大小又分为 movsb, movsw, movsd，分别对应传送一个字节，一个字，一个双字。</p>
<p>movs 命令可以使用重复执行，方向标志位 DF 决定了 SI 和 DI 在单次操作后是增加（0）还是减少（1）<br>每次变动的大小与具体执行命令有关：movsb -&gt; 1B | movsw -&gt; 2B | movsd -&gt; 4B</p>
<h3 id="cmps"><a href="#cmps" class="headerlink" title="cmps"></a>cmps</h3><h3 id="scas"><a href="#scas" class="headerlink" title="scas"></a>scas</h3><h3 id="lods"><a href="#lods" class="headerlink" title="lods"></a>lods</h3><h3 id="stos"><a href="#stos" class="headerlink" title="stos"></a>stos</h3><h3 id="rep"><a href="#rep" class="headerlink" title="rep"></a>rep</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rep movsw</span><br></pre></td></tr></table></figure>

<p>重复前缀指令，不能单独使用，可以用来重复执行跟在后面的指令，重复次数由 CX 控制（每次重复 CX 减一，知道 CX 值为零停止）。</p>
<h3 id="repe-amp-repz"><a href="#repe-amp-repz" class="headerlink" title="repe &amp; repz"></a>repe &amp; repz</h3><h3 id="repne-amp-repnz"><a href="#repne-amp-repnz" class="headerlink" title="repne &amp; repnz"></a>repne &amp; repnz</h3><h3 id="repc"><a href="#repc" class="headerlink" title="repc"></a>repc</h3><h3 id="repnc"><a href="#repnc" class="headerlink" title="repnc"></a>repnc</h3><h2 id="程序转移指令"><a href="#程序转移指令" class="headerlink" title="程序转移指令"></a>程序转移指令</h2><p>可以修改 IP 或同时修改 CS 和 IP 寄存器内容的指令统称为转移指令。可以通俗理解为：转移指令就是可以控制 CPU 下一步执行内存中哪一处指令的指令。</p>
<p>在 8086 中按照转移行为可分为：</p>
<ol>
<li>段内转移：只修改 IP<ol>
<li>短转移：IP 修改范围为 -128~127(2^7-1)</li>
<li>近转移：IP 修改范围为 -32768~32767(2^15-1)</li>
</ol>
</li>
<li>段间转移（远转移）：同时修改 CS 和 IP</li>
</ol>
<p>按照功能不同，转移指令又可细分为一下几种：</p>
<h3 id="无条件转移指令"><a href="#无条件转移指令" class="headerlink" title="无条件转移指令"></a>无条件转移指令</h3><p>描述：无条件转移指令可以控制 CPU 下一步执行代码段（CS）中任意内存地址对应的指令</p>
<h4 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start: mov ax,offset start ; 相当于 mov ax,0</span><br><span class="line">next: mov ax,offset next ; 相当于 mov ax,3 | 第一条指令长度为三个字节，因此 next 的偏移地址为 3</span><br></pre></td></tr></table></figure>

<p>操作符，由编译器处理，功能是获取标签的偏移地址</p>
<h4 id="jmp"><a href="#jmp" class="headerlink" title="jmp"></a>jmp</h4><h5 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h5><p>转移地址可以在指令、内存或寄存器中指出。可以只修改 IP，也可以同时修改 CS 和 IP</p>
<p>使用 jmp 指令时需要提供两种信息：</p>
<ol>
<li>转移的目的地址</li>
<li>转移类型（段间转移（远转移）、段内短转移、段内近转移）</li>
</ol>
<h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><ol>
<li>转移目的地址在指令中</li>
</ol>
<p>语法：<code>jmp short &lt;标签&gt;</code><br>作用：转移到标签处执行指令<br>描述：这种格式的 jmp 指令实现的是段内短转移，short 为短转移标志<br>原理：ip = ip + 8 位位移 | 8 位位移 = 标签地址 - jmp 指令后第一个字节的地址<br>此指令形式是针对当前指令所在位置（即当前 IP）进行跳转的，且 8 位位移范围是 -128~127，由编译程序在编译时计算<br>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">start:</span><br><span class="line">    mov ax,0</span><br><span class="line">    jmp short next</span><br><span class="line">    add ax,1</span><br><span class="line">next:</span><br><span class="line">    inc ax</span><br><span class="line">; 最终结果 ax 内的值为 1</span><br></pre></td></tr></table></figure>

<p>语法：<code>jmp near ptr &lt;标签&gt;</code><br>作用：转移到标签处执行指令<br>描述：这种格式的 jmp 指令实现的是段内近转移，near 为近转移标志<br>原理：ip = ip + 16 位位移 | 16 位位移 = 标签地址 - jmp 指令后的第一个字节地址<br>此指令也是针对当前指令所在位置（即当前 IP）进行跳转的，且 16 位位移范围是 -32768~32767，由编译程序在编译时计算</p>
<p>语法：<code>jmp far ptr &lt;标签标签&gt;</code><br>作用：转移到标签处执行命令<br>描述：这种格式的 jmp 指令实现的是段间转移（即远转移），far ptr 为远转移标志<br>原理：cs = 标签所在段的段地址 | ip = 标签所在段中的偏移 | 高位存储段地址，低位存储偏移地址</p>
<ol start="2">
<li>转移目的地址在内存中</li>
</ol>
<p>语法：<code>jmp word ptr &lt;[内存单元地址]&gt;</code><br>作用：转移到目标内存地址所存储的地址处执行指令<br>描述：这种格式的 jmp 指令实现的是段内转移，word ptr 是转移标志<br>原理：ip = 内存地址所存储的内容</p>
<p>语法：<code>jmp dword ptr &lt;[内存单元地址]&gt;</code><br>作用：在内存单元地址处存放两个字，高地址存放转移的目的段地址，低地址存放转移的目的偏移地址<br>描述：这种格式的 jmp 指令实现的是段间转移（即远转移），dword ptr 为远转移标志<br>原理：cs = 内存单元地址 + 2 所存储的内容 | ip = 内存单元地址存储的内容<br>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mov ax,0123H</span><br><span class="line">mov ds:[0],ax</span><br><span class="line">mov word ptr ds:[2],0</span><br><span class="line">jmp dword ptr ds:[0]</span><br><span class="line">; 执行后 cs &#x3D; 0 | ip &#x3D; 0123H</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>转移目的地址在寄存器中</li>
</ol>
<p>语法：<code>jmp &lt;16位寄存器&gt;</code><br>作用：转移到目标寄存器所存储的地址处执行指令<br>描述：这种格式的 jmp 指令实现的是段内转移<br>原理：ip = 16位寄存器内容</p>
<p>语法：<code>jmp &lt;[段地址:偏移地址]&gt;</code><br>作用：转移到目标地址处执行命令<br>描述：这种格式的 jmp 执行实现的是段间转移<br>原理：cs = 段地址 | ip = 偏移地址</p>
<h3 id="条件转移指令"><a href="#条件转移指令" class="headerlink" title="条件转移指令"></a>条件转移指令</h3><h4 id="jz-je-amp-jnz-jne-零判断（相等判断）"><a href="#jz-je-amp-jnz-jne-零判断（相等判断）" class="headerlink" title="jz(je) &amp; jnz(jne) | 零判断（相等判断）"></a>jz(je) &amp; jnz(jne) | 零判断（相等判断）</h4><p>jz 和 je 意义相同，只是写法不同。<br>jnz 和 jne 意义相同，只是写法不同。</p>
<p>jz：如果标志位 ZF = 1，则跳转到指定地址。<br>jnz：如果标志位 ZF = 0，则跳转到指定地址。</p>
<p>ZF：零标志位，相关指令执行后结果是否为零 | 0 -&gt; 否 | 1 -&gt; 是。</p>
<h4 id="jc-amp-jnc-进位判断"><a href="#jc-amp-jnc-进位判断" class="headerlink" title="jc &amp; jnc | 进位判断"></a>jc &amp; jnc | 进位判断</h4><p>jc：如果标志位 CF = 1，则跳转到指定地址。<br>jnc：如果标志位 CF = 0，则跳转到指定地址。</p>
<p>CF：进位标志位，相关指令执行后是否产生了进位或借位 | 0 -&gt; 没产生 | 1 -&gt; 产生了。</p>
<h4 id="jp-jpe-amp-jnp-jpo-奇偶判断"><a href="#jp-jpe-amp-jnp-jpo-奇偶判断" class="headerlink" title="jp(jpe) &amp; jnp(jpo) | 奇偶判断"></a>jp(jpe) &amp; jnp(jpo) | 奇偶判断</h4><p>jp 和 jpe 意义相同，只是写法不同。<br>jnp 和 jpo 意义相同，只是写法不同。</p>
<p>jp：如果标志位 PF = 1，则跳转到指定地址。<br>jnp：如果标志位 PF = 0，则跳转到指定地址。</p>
<p>PF：奇偶标志位，相关指令执行后结果中为 1 的比特的个数是否为偶数 | 0 -&gt; 奇 | 1 -&gt; 偶。</p>
<h4 id="js-amp-jns-正负判断"><a href="#js-amp-jns-正负判断" class="headerlink" title="js &amp; jns | 正负判断"></a>js &amp; jns | 正负判断</h4><p>js：如果标志位 SF = 1，则跳转到指定地址。<br>jns：如果标志位 SF = 0，则跳转到指定地址。</p>
<p>SF：符号标志位，相关指令执行后结果是否为负数 | 0 -&gt; 非负数 | 1 -&gt; 负数。</p>
<h4 id="jo-amp-jno"><a href="#jo-amp-jno" class="headerlink" title="jo &amp; jno"></a>jo &amp; jno</h4><p>jo：如果标志位 OF = 1，则跳转到指定地址。<br>jnp：如果标志位 OF = 0，则跳转到指定地址。</p>
<p>OF：溢出标志位，有符号运算结果是否产生溢出 | 0 -&gt; 否 | 1 -&gt; 是。</p>
<h3 id="循环控制指令"><a href="#循环控制指令" class="headerlink" title="循环控制指令"></a>循环控制指令</h3><h3 id="终端指令"><a href="#终端指令" class="headerlink" title="终端指令"></a>终端指令</h3><h2 id="处理器控制指令"><a href="#处理器控制指令" class="headerlink" title="处理器控制指令"></a>处理器控制指令</h2><p>处理器控制指令包括标志操作指令和 CPU 控制指令</p>
<h3 id="标志操作指令"><a href="#标志操作指令" class="headerlink" title="标志操作指令"></a>标志操作指令</h3><h4 id="stc-amp-clc-amp-cmc"><a href="#stc-amp-clc-amp-cmc" class="headerlink" title="stc &amp; clc &amp; cmc"></a>stc &amp; clc &amp; cmc</h4><p>stc：将 CF 设置为 1<br>clc：将 CF 设置为 0<br>cmc：将 CF 取反<br>CF：进位标志，计算中是否产生了进位或借位</p>
<h4 id="std-amp-cld"><a href="#std-amp-cld" class="headerlink" title="std &amp; cld"></a>std &amp; cld</h4><p>std：将 DF 设置为 1<br>cld：将 DF 设置为 0<br>DF：串处理指令中，每次操作后 SI 或 DI 自增（0）还是自减（1）</p>
<h4 id="sti-amp-cli"><a href="#sti-amp-cli" class="headerlink" title="sti &amp; cli"></a>sti &amp; cli</h4><p>sti：将 IF 设置为 1<br>cli：将 IF 设置为 0<br>IF：中断允许标志，CPU 是否能响应外部课评比中断请求</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://innofang.github.io/2017/11/26/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B9%9D%EF%BC%89%EF%BC%9A%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4%E7%9A%84%E5%8E%9F%E7%90%86/" target="_blank" rel="external nofollow noopener noreferrer">Inno’s Blog：汇编语言学习笔记（九）：转移指令的原理</a></li>
<li><a href="https://www.cnblogs.com/mfm11111/archive/2009/03/27/1422828.html" target="_blank" rel="external nofollow noopener noreferrer">jasonM：一步步学习汇编(10)之jmp指令原理分析（破解软件的必修课）</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53394807" target="_blank" rel="external nofollow noopener noreferrer">FullSky：8086运算、位移、处理器指令</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53394807" target="_blank" rel="external nofollow noopener noreferrer">知乎-愛是等待是细水长流：汇编语言–x86汇编指令集大全</a></li>
<li><a href="https://blubiu.github.io/2020/01/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0-DIV%E6%8C%87%E4%BB%A4(%E9%99%A4%E6%B3%95%E6%8C%87%E4%BB%A4)/" target="_blank" rel="external nofollow noopener noreferrer">blubiu：汇编语言笔记(七)–DIV指令(除法指令)</a></li>
<li><a href="https://blog.csdn.net/fireblue1990/article/details/52530248" target="_blank" rel="external nofollow noopener noreferrer">CSDN-YiShiWenYan：汇编中的PTR含义</a></li>
<li><a href="https://gowa.club/Asm/%E5%85%B3%E4%BA%8E%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84PTR%E6%93%8D%E4%BD%9C%E7%AC%A6.html" target="_blank" rel="external nofollow noopener noreferrer">退思园：关于汇编中的PTR操作符</a></li>
<li><a href="http://www.511yj.com/asm-x86-81.html" target="_blank" rel="external nofollow noopener noreferrer">511遇见： 汇编语言标志寄存器cmp 指令</a></li>
<li><a href="http://demon.tw/programming/assembly-sar-shr.html" target="_blank" rel="external nofollow noopener noreferrer">Demon’s Blog：汇编语言中SAR和SHR指令的区别</a></li>
<li><a href="http://c.biancheng.net/asm/" target="_blank" rel="external nofollow noopener noreferrer">C 语言中文网：汇编语言</a></li>
<li><a href="https://blog.csdn.net/huang987246510/article/details/90311189" target="_blank" rel="external nofollow noopener noreferrer">享乐主：两类风格汇编语法对比</a></li>
<li><a href="https://blog.csdn.net/shiwenlei102/article/details/23127287" target="_blank" rel="external nofollow noopener noreferrer">red_rock：nasm指令详解</a></li>
</ol>

        
        <footer class="article-footer">
        </footer>
    </div>
</div></article>


    
<nav id="article-nav">
    
        <a href="/archives/4940711f.html" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    8086 处理器寻址方式
                
            </div>
        </a>
    
    
        <a href="/archives/f3c5e08e.html" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">数据结构笔记1-概论</div>
        </a>
    
</nav>





    
    
        <section id="comments"> <div id="vcomments"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'sz7ny95XiYWkxht3H3YDs2GX-gzGzoHsz',
        appKey: 'T8JJugDkbqtFLONIIzcPWW76',
        placeholder: '不要吝啬赞美的语句ヾﾉ≧∀≦)o!',
        avatar: 'mp',
        meta: ['nick','mail','link'],
        pageSize: 10,
        visitor: true,
        notify: true,
        verify: true
    })
    let info = document.querySelectorAll('#vcomments>.info')[0]
    if (info) { info.style.display = 'none' }
</script> </section>
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            ryomahan &copy; 2024 
            <a rel="external nofollow noopener noreferrer" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png"></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Comment By <a href="https://valine.js.org/" target="_blank" rel="external nofollow noopener noreferrer">valine</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten" target="_blank" rel="external nofollow noopener noreferrer">wikitten</a>
            
                <br>
                <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span></span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_pv"><i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span></span>
            
        </div>
    </div>
</footer>

        
    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
